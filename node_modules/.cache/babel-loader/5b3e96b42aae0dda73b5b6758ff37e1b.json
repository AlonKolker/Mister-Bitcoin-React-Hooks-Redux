{"ast":null,"code":"import { storageService } from \"../services/storageService\";\nexport const userService = {\n  getUser,\n  signUp,\n  updateBalance\n};\nconst USERS = \"usersDB\";\nconst USER_KEY = \"loggedin\";\n\nfunction getUser() {\n  const user = storageService.load(USER_KEY) || null;\n  return user;\n}\n\nfunction signUp(name) {\n  let user = {\n    name,\n    coins: 100,\n    moves: []\n  };\n  console.log(name);\n  storageService.store(USER_KEY, user);\n}\n\nfunction updateBalance(to, val) {\n  let user = getUser();\n  console.log(val);\n  let userBalance = JSON.parse(JSON.stringify(user.coins));\n  if (userBalance - val <= 0) return false;\n  user.coins = user.coins - val;\n  let move = {\n    'At': new Date(Date.now()).toLocaleDateString(),\n    'Amount': val,\n    to\n  };\n  user.moves.unshift(move);\n  storageService.store(USER_KEY, user);\n  return user.moves;\n}","map":{"version":3,"names":["storageService","userService","getUser","signUp","updateBalance","USERS","USER_KEY","user","load","name","coins","moves","console","log","store","to","val","userBalance","JSON","parse","stringify","move","Date","now","toLocaleDateString","unshift"],"sources":["C:/Users/ALON/Desktop/Mister-bitcoin -React day 106/Mister Bitcoin-React-with-hooks-and-redux/src/services/user.service.js"],"sourcesContent":["import { storageService } from \"../services/storageService\"\r\nexport const userService = {\r\n  getUser,\r\n  signUp,\r\n  updateBalance,\r\n}\r\n\r\nconst USERS = \"usersDB\"\r\nconst USER_KEY = \"loggedin\"\r\n\r\nfunction getUser() {\r\n\r\n  const user = storageService.load(USER_KEY) || null\r\n  return user\r\n}\r\n\r\nfunction signUp(name) {\r\n  let user = {\r\n    name,\r\n    coins: 100,\r\n    moves: [],\r\n  }\r\n  console.log(name)\r\n  storageService.store(USER_KEY, user)\r\n}\r\n\r\nfunction updateBalance(to,val) {\r\n  let user = getUser()\r\n  console.log(val)\r\n  let userBalance = JSON.parse(JSON.stringify(user.coins))\r\n  if (userBalance - val <= 0) return false\r\n\r\n  user.coins = user.coins - val\r\n\r\n  let move = {\r\n    'At': new Date(Date.now()).toLocaleDateString(),\r\n    'Amount': val ,\r\n   to,\r\n  }\r\n  user.moves.unshift(move)\r\n  storageService.store(USER_KEY, user)\r\n  return user.moves\r\n}\r\n"],"mappings":"AAAA,SAASA,cAAT,QAA+B,4BAA/B;AACA,OAAO,MAAMC,WAAW,GAAG;EACzBC,OADyB;EAEzBC,MAFyB;EAGzBC;AAHyB,CAApB;AAMP,MAAMC,KAAK,GAAG,SAAd;AACA,MAAMC,QAAQ,GAAG,UAAjB;;AAEA,SAASJ,OAAT,GAAmB;EAEjB,MAAMK,IAAI,GAAGP,cAAc,CAACQ,IAAf,CAAoBF,QAApB,KAAiC,IAA9C;EACA,OAAOC,IAAP;AACD;;AAED,SAASJ,MAAT,CAAgBM,IAAhB,EAAsB;EACpB,IAAIF,IAAI,GAAG;IACTE,IADS;IAETC,KAAK,EAAE,GAFE;IAGTC,KAAK,EAAE;EAHE,CAAX;EAKAC,OAAO,CAACC,GAAR,CAAYJ,IAAZ;EACAT,cAAc,CAACc,KAAf,CAAqBR,QAArB,EAA+BC,IAA/B;AACD;;AAED,SAASH,aAAT,CAAuBW,EAAvB,EAA0BC,GAA1B,EAA+B;EAC7B,IAAIT,IAAI,GAAGL,OAAO,EAAlB;EACAU,OAAO,CAACC,GAAR,CAAYG,GAAZ;EACA,IAAIC,WAAW,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeb,IAAI,CAACG,KAApB,CAAX,CAAlB;EACA,IAAIO,WAAW,GAAGD,GAAd,IAAqB,CAAzB,EAA4B,OAAO,KAAP;EAE5BT,IAAI,CAACG,KAAL,GAAaH,IAAI,CAACG,KAAL,GAAaM,GAA1B;EAEA,IAAIK,IAAI,GAAG;IACT,MAAM,IAAIC,IAAJ,CAASA,IAAI,CAACC,GAAL,EAAT,EAAqBC,kBAArB,EADG;IAET,UAAUR,GAFD;IAGVD;EAHU,CAAX;EAKAR,IAAI,CAACI,KAAL,CAAWc,OAAX,CAAmBJ,IAAnB;EACArB,cAAc,CAACc,KAAf,CAAqBR,QAArB,EAA+BC,IAA/B;EACA,OAAOA,IAAI,CAACI,KAAZ;AACD"},"metadata":{},"sourceType":"module"}