{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ALON\\\\Desktop\\\\Mister-bitcoin -React day 106\\\\Mister Bitcoin-React-with-hooks-and-redux\\\\src\\\\components\\\\Market-price.jsx\";\nimport React, { Component } from \"react\";\nimport { Line } from \"react-chartjs-2\";\nimport { bitcoinService } from \"../services/bitcoin.service\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class MarketPrice extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      updatedMarketPrice: null,\n      timePeriod: \"10\"\n    };\n\n    this.handleChange = e => {\n      console.log(e.target.value);\n      this.setState({\n        timePeriod: e.target.value\n      });\n      console.log(this.state.timePeriod);\n    };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.timePeriod !== this.state.timePeriod) {\n      this.loadBtcPrices();\n    }\n  }\n\n  componentDidMount() {\n    this.loadBtcPrices();\n  }\n\n  async loadBtcPrices() {\n    try {\n      let updatedMarketPrice = await bitcoinService.getMarketPrice(this.state.timePeriod);\n      let xVals;\n      xVals = updatedMarketPrice.values.map(val => new Date(val.x * 1000).toLocaleDateString()); //   console.log(updatedMarketPrice.values.filter(val=>val.y));\n\n      let newData = {\n        labels: xVals,\n        datasets: [{\n          label: `BTC Market Price - ${this.state.timePeriod} Months`,\n          data: updatedMarketPrice.values.filter(val => val.y),\n          fill: true,\n          backgroundColor: \"rgba(75,192,192,0.2)\",\n          borderColor: \"rgba(75,192,192,1)\"\n        }]\n      }; // console.log(newData);\n\n      this.setState({\n        updatedMarketPrice: newData\n      });\n    } catch (err) {\n      console.log(\"err:\", err);\n    }\n  }\n\n  render() {\n    const {\n      updatedMarketPrice,\n      timePeriod\n    } = this.state;\n    if (!updatedMarketPrice) return /*#__PURE__*/_jsxDEV(\"span\", {\n      children: \"Loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 37\n    }, this);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"MarketPrice\",\n      children: [/*#__PURE__*/_jsxDEV(\"select\", {\n        name: \"timePeriod\",\n        value: timePeriod,\n        onChange: this.handleChange,\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"10\",\n          children: \"10 Months\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"2\",\n          children: \"2 Months\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"4\",\n          children: \"4 Months\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"6\",\n          children: \"6 Months\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"8\",\n          children: \"8 Months\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"12\",\n          children: \"12 Months\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 2\n      }, this), /*#__PURE__*/_jsxDEV(Line, {\n        data: updatedMarketPrice\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"names":["React","Component","Line","bitcoinService","MarketPrice","state","updatedMarketPrice","timePeriod","handleChange","e","console","log","target","value","setState","componentDidUpdate","prevProps","prevState","loadBtcPrices","componentDidMount","getMarketPrice","xVals","values","map","val","Date","x","toLocaleDateString","newData","labels","datasets","label","data","filter","y","fill","backgroundColor","borderColor","err","render"],"sources":["C:/Users/ALON/Desktop/Mister-bitcoin -React day 106/Mister Bitcoin-React-with-hooks-and-redux/src/components/Market-price.jsx"],"sourcesContent":["import React, { Component } from \"react\"\r\nimport { Line } from \"react-chartjs-2\"\r\nimport { bitcoinService } from \"../services/bitcoin.service\"\r\n\r\nexport class MarketPrice extends Component {\r\n  state = {\r\n    updatedMarketPrice: null,\r\n    timePeriod: \"10\",\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    console.log(e.target.value)\r\n    this.setState({ timePeriod: e.target.value })\r\n    console.log(this.state.timePeriod)\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.timePeriod !== this.state.timePeriod) {\r\n      this.loadBtcPrices()\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.loadBtcPrices()\r\n  }\r\n  async loadBtcPrices() {\r\n    try {\r\n      let updatedMarketPrice = await bitcoinService.getMarketPrice(this.state.timePeriod)\r\n      let xVals\r\n      xVals = updatedMarketPrice.values.map((val) => new Date(val.x * 1000).toLocaleDateString())\r\n      //   console.log(updatedMarketPrice.values.filter(val=>val.y));\r\n      let newData = {\r\n        labels: xVals,\r\n        datasets: [\r\n          {\r\n            label: `BTC Market Price - ${this.state.timePeriod} Months`,\r\n            data: updatedMarketPrice.values.filter((val) => val.y),\r\n            fill: true,\r\n            backgroundColor: \"rgba(75,192,192,0.2)\",\r\n            borderColor: \"rgba(75,192,192,1)\",\r\n          },\r\n        ],\r\n      }\r\n      // console.log(newData);\r\n      this.setState({ updatedMarketPrice: newData })\r\n    } catch (err) {\r\n      console.log(\"err:\", err)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { updatedMarketPrice, timePeriod } = this.state\r\n    if (!updatedMarketPrice) return <span>Loading</span>\r\n    return (\r\n      <div className='MarketPrice'>\r\n <select name='timePeriod'  value={timePeriod} onChange={this.handleChange}>\r\n          <option value='10'>10 Months</option>\r\n          <option value='2'>2 Months</option>\r\n          <option value='4'>4 Months</option>\r\n          <option value='6'>6 Months</option>\r\n          <option value='8'>8 Months</option>\r\n          <option value='12'>12 Months</option>\r\n        </select>\r\n        <Line data={updatedMarketPrice} />\r\n      </div>\r\n    )\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}