{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ALON\\\\Desktop\\\\Mister-bitcoin -React day 106\\\\Mister Bitcoin-React-with-hooks-and-redux\\\\src\\\\components\\\\Market-price.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { Component } from \"react\";\nimport { Line } from \"react-chartjs-2\";\nimport { bitcoinService } from \"../services/bitcoin.service\"; // import Chart from \"chart.js/auto\" //Nedded for category scale\n\nimport { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const MarketPrice = () => {\n  _s();\n\n  const [updatedMarketPrice, setMarketPrice] = useState(null);\n  const [timePeriod, setTimePeriod] = useState(\"10\");\n  useEffect(() => {\n    loadMarketPrice();\n  }, [timePeriod]);\n\n  const loadMarketPrice = async () => {\n    console.log(\"before\", timePeriod);\n\n    try {\n      let updatedMarketPrice = await bitcoinService.getMarketPrice(timePeriod);\n      let xVals;\n      xVals = updatedMarketPrice.values.map(val => new Date(val.x * 1000).toLocaleDateString());\n      let newData = {\n        labels: xVals,\n        datasets: [{\n          label: `BTC Market Price - ${timePeriod} Months`,\n          data: updatedMarketPrice.values.filter(val => val.y),\n          fill: true,\n          backgroundColor: \"rgba(75,192,192,0.2)\",\n          borderColor: \"rgba(75,192,192,1)\"\n        }]\n      };\n      setMarketPrice(newData);\n    } catch (err) {\n      console.log(\"err:\", err);\n    }\n  };\n\n  const onSetTimePeriod = ev => {\n    const value = ev.target.value;\n    setTimePeriod(value);\n  };\n\n  if (!updatedMarketPrice) return /*#__PURE__*/_jsxDEV(\"span\", {\n    children: \"Loading\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 35\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"MarketPrice\",\n    children: [/*#__PURE__*/_jsxDEV(\"select\", {\n      name: \"timePeriod\",\n      onChange: ev => onSetTimePeriod(ev),\n      id: \"timePeriod\",\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"10\",\n        children: \"10 Months\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"2\",\n        children: \"2 Months\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"4\",\n        children: \"4 Months\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"6\",\n        children: \"6 Months\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"8\",\n        children: \"8 Months\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"12\",\n        children: \"12 Months\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Line, {\n      data: updatedMarketPrice\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}; //old version without hooks\n// export class MarketPrice extends Component {\n//   state = {\n//     updatedMarketPrice: null,\n//     timePeriod: \"10\",\n//   }\n//   handleChange = (e) => {\n//     console.log(e.target.value)\n//     this.setState({ timePeriod: e.target.value })\n//   }\n//   componentDidUpdate(prevProps, prevState) {\n//     if (prevState.timePeriod !== this.state.timePeriod) {\n//       this.loadBtcPrices()\n//     }\n//   }\n//   componentDidMount() {\n//     this.loadBtcPrices()\n//   }\n//   async loadBtcPrices() {\n//     try {\n//       let updatedMarketPrice = await bitcoinService.getMarketPrice(this.state.timePeriod)\n//       let xVals\n//       xVals = updatedMarketPrice.values.map((val) => new Date(val.x * 1000).toLocaleDateString())\n//       //   console.log(updatedMarketPrice.values.filter(val=>val.y));\n//       let newData = {\n//         labels: xVals,\n//         datasets: [\n//           {\n//             label: `BTC Market Price - ${this.state.timePeriod} Months`,\n//             data: updatedMarketPrice.values.filter((val) => val.y),\n//             fill: true,\n//             backgroundColor: \"rgba(75,192,192,0.2)\",\n//             borderColor: \"rgba(75,192,192,1)\",\n//           },\n//         ],\n//       }\n//       // console.log(newData);\n//       this.setState({ updatedMarketPrice: newData })\n//     } catch (err) {\n//       console.log(\"err:\", err)\n//     }\n//   }\n//   render() {\n//     const { updatedMarketPrice, timePeriod } = this.state\n//     if (!updatedMarketPrice) return <span>Loading</span>\n//     return (\n//       <div className='MarketPrice'>\n//  <select name='timePeriod'  value={timePeriod} onChange={this.handleChange}>\n//           <option value='10'>10 Months</option>\n//           <option value='2'>2 Months</option>\n//           <option value='4'>4 Months</option>\n//           <option value='6'>6 Months</option>\n//           <option value='8'>8 Months</option>\n//           <option value='12'>12 Months</option>\n//         </select>\n//         <Line data={updatedMarketPrice} />\n//       </div>\n//     )\n//   }\n// }\n\n_s(MarketPrice, \"ae62/yzwTOU2b6+bIWBbpCNRVSo=\");\n\n_c = MarketPrice;\n\nvar _c;\n\n$RefreshReg$(_c, \"MarketPrice\");","map":{"version":3,"names":["React","Component","Line","bitcoinService","useEffect","useState","MarketPrice","updatedMarketPrice","setMarketPrice","timePeriod","setTimePeriod","loadMarketPrice","console","log","getMarketPrice","xVals","values","map","val","Date","x","toLocaleDateString","newData","labels","datasets","label","data","filter","y","fill","backgroundColor","borderColor","err","onSetTimePeriod","ev","value","target"],"sources":["C:/Users/ALON/Desktop/Mister-bitcoin -React day 106/Mister Bitcoin-React-with-hooks-and-redux/src/components/Market-price.jsx"],"sourcesContent":["import React, { Component } from \"react\"\r\nimport { Line } from \"react-chartjs-2\"\r\nimport { bitcoinService } from \"../services/bitcoin.service\"\r\n// import Chart from \"chart.js/auto\" //Nedded for category scale\r\n\r\nimport { useEffect, useState } from \"react\"\r\n\r\nexport const MarketPrice = () => {\r\n  const [updatedMarketPrice, setMarketPrice] = useState(null)\r\n  const [timePeriod, setTimePeriod] = useState(\"10\")\r\n\r\n  useEffect(() => {\r\n    loadMarketPrice()\r\n  }, [timePeriod])\r\n\r\n  const loadMarketPrice = async () => {\r\n    console.log(\"before\", timePeriod)\r\n    try {\r\n      let updatedMarketPrice = await bitcoinService.getMarketPrice(timePeriod)\r\n\r\n      let xVals\r\n      xVals = updatedMarketPrice.values.map((val) => new Date(val.x * 1000).toLocaleDateString())\r\n      let newData = {\r\n        labels: xVals,\r\n        datasets: [\r\n          {\r\n            label: `BTC Market Price - ${timePeriod} Months`,\r\n            data: updatedMarketPrice.values.filter((val) => val.y),\r\n            fill: true,\r\n            backgroundColor: \"rgba(75,192,192,0.2)\",\r\n            borderColor: \"rgba(75,192,192,1)\",\r\n          },\r\n        ],\r\n      }\r\n      setMarketPrice(newData)\r\n    } catch (err) {\r\n      console.log(\"err:\", err)\r\n    }\r\n  }\r\n\r\n  const onSetTimePeriod = (ev) => {\r\n    const value = ev.target.value\r\n    setTimePeriod(value)\r\n  }\r\n\r\n  if (!updatedMarketPrice) return <span>Loading</span>\r\n  return (\r\n    <div className='MarketPrice'>\r\n      <select name='timePeriod' onChange={(ev) => onSetTimePeriod(ev)} id='timePeriod'>\r\n        <option value='10'>10 Months</option>\r\n        <option value='2'>2 Months</option>\r\n        <option value='4'>4 Months</option>\r\n        <option value='6'>6 Months</option>\r\n        <option value='8'>8 Months</option>\r\n        <option value='12'>12 Months</option>\r\n      </select>\r\n      <Line data={updatedMarketPrice} />\r\n    </div>\r\n  )\r\n}\r\n\r\n//old version without hooks\r\n// export class MarketPrice extends Component {\r\n//   state = {\r\n//     updatedMarketPrice: null,\r\n//     timePeriod: \"10\",\r\n//   }\r\n\r\n//   handleChange = (e) => {\r\n//     console.log(e.target.value)\r\n//     this.setState({ timePeriod: e.target.value })\r\n//   }\r\n\r\n//   componentDidUpdate(prevProps, prevState) {\r\n//     if (prevState.timePeriod !== this.state.timePeriod) {\r\n//       this.loadBtcPrices()\r\n//     }\r\n//   }\r\n\r\n//   componentDidMount() {\r\n//     this.loadBtcPrices()\r\n//   }\r\n//   async loadBtcPrices() {\r\n//     try {\r\n//       let updatedMarketPrice = await bitcoinService.getMarketPrice(this.state.timePeriod)\r\n//       let xVals\r\n//       xVals = updatedMarketPrice.values.map((val) => new Date(val.x * 1000).toLocaleDateString())\r\n//       //   console.log(updatedMarketPrice.values.filter(val=>val.y));\r\n//       let newData = {\r\n//         labels: xVals,\r\n//         datasets: [\r\n//           {\r\n//             label: `BTC Market Price - ${this.state.timePeriod} Months`,\r\n//             data: updatedMarketPrice.values.filter((val) => val.y),\r\n//             fill: true,\r\n//             backgroundColor: \"rgba(75,192,192,0.2)\",\r\n//             borderColor: \"rgba(75,192,192,1)\",\r\n//           },\r\n//         ],\r\n//       }\r\n//       // console.log(newData);\r\n//       this.setState({ updatedMarketPrice: newData })\r\n//     } catch (err) {\r\n//       console.log(\"err:\", err)\r\n//     }\r\n//   }\r\n\r\n//   render() {\r\n//     const { updatedMarketPrice, timePeriod } = this.state\r\n//     if (!updatedMarketPrice) return <span>Loading</span>\r\n//     return (\r\n//       <div className='MarketPrice'>\r\n//  <select name='timePeriod'  value={timePeriod} onChange={this.handleChange}>\r\n//           <option value='10'>10 Months</option>\r\n//           <option value='2'>2 Months</option>\r\n//           <option value='4'>4 Months</option>\r\n//           <option value='6'>6 Months</option>\r\n//           <option value='8'>8 Months</option>\r\n//           <option value='12'>12 Months</option>\r\n//         </select>\r\n//         <Line data={updatedMarketPrice} />\r\n//       </div>\r\n//     )\r\n//   }\r\n// }\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}