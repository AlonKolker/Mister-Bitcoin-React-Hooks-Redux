{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ALON/Desktop/Mister-bitcoin -React day 106/Mister Bitcoin-React-with-hooks-and-redux/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ALON/Desktop/Mister-bitcoin -React day 106/Mister Bitcoin-React-with-hooks-and-redux/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/ALON/Desktop/Mister-bitcoin -React day 106/Mister Bitcoin-React-with-hooks-and-redux/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Line}from\"react-chartjs-2\";import{useEffect,useState,React}from\"react\";import Chart from\"chart.js/auto\";//Nedded for category scale\n// import React from \"react\"\nimport{bitcoinService}from\"../services/bitcoin.service\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var MarketPrice=function MarketPrice(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),updatedMarketPrice=_useState2[0],setMarketPrice=_useState2[1];var _useState3=useState(\"10\"),_useState4=_slicedToArray(_useState3,2),timePeriod=_useState4[0],setTimePeriod=_useState4[1];useEffect(function(){loadMarketPrice();},[timePeriod]);var loadMarketPrice=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _updatedMarketPrice,xVals,newData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return bitcoinService.getMarketPrice(timePeriod);case 3:_updatedMarketPrice=_context.sent;xVals=_updatedMarketPrice.values.map(function(val){return new Date(val.x*1000).toLocaleDateString();});newData={labels:xVals,datasets:[{label:\"BTC Market Price - \".concat(timePeriod,\" Months\"),data:_updatedMarketPrice.values.filter(function(val){return val.y;}),fill:true,backgroundColor:\"rgba(75,192,192,0.2)\",borderColor:\"rgba(75,192,192,1)\"}]};setMarketPrice(newData);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(\"err:\",_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function loadMarketPrice(){return _ref.apply(this,arguments);};}();var onSetTimePeriod=function onSetTimePeriod(ev){var value=ev.target.value;setTimePeriod(value);};if(!updatedMarketPrice)return/*#__PURE__*/_jsx(\"span\",{children:\"Loading\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"MarketPrice\",children:[/*#__PURE__*/_jsxs(\"select\",{name:\"timePeriod\",onChange:function onChange(ev){return onSetTimePeriod(ev);},id:\"timePeriod\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"10\",children:\"10 Months\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"2 Months\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4\",children:\"4 Months\"}),/*#__PURE__*/_jsx(\"option\",{value:\"6\",children:\"6 Months\"}),/*#__PURE__*/_jsx(\"option\",{value:\"8\",children:\"8 Months\"}),/*#__PURE__*/_jsx(\"option\",{value:\"12\",children:\"12 Months\"})]}),/*#__PURE__*/_jsx(Line,{data:updatedMarketPrice})]});};","map":{"version":3,"names":["Line","useEffect","useState","React","Chart","bitcoinService","MarketPrice","updatedMarketPrice","setMarketPrice","timePeriod","setTimePeriod","loadMarketPrice","getMarketPrice","xVals","values","map","val","Date","x","toLocaleDateString","newData","labels","datasets","label","data","filter","y","fill","backgroundColor","borderColor","console","log","onSetTimePeriod","ev","value","target"],"sources":["C:/Users/ALON/Desktop/Mister-bitcoin -React day 106/Mister Bitcoin-React-with-hooks-and-redux/src/components/Market-price.jsx"],"sourcesContent":["import { Line } from \"react-chartjs-2\"\r\nimport { useEffect, useState, React } from \"react\"\r\nimport Chart from \"chart.js/auto\" //Nedded for category scale\r\n\r\n// import React from \"react\"\r\nimport { bitcoinService } from \"../services/bitcoin.service\"\r\n\r\nexport const MarketPrice = () => {\r\n  const [updatedMarketPrice, setMarketPrice] = useState(null)\r\n  const [timePeriod, setTimePeriod] = useState(\"10\")\r\n\r\n  useEffect(() => {\r\n    loadMarketPrice()\r\n  }, [timePeriod])\r\n\r\n  const loadMarketPrice = async () => {\r\n    try {\r\n      let updatedMarketPrice = await bitcoinService.getMarketPrice(timePeriod)\r\n\r\n      let xVals\r\n      xVals = updatedMarketPrice.values.map((val) => new Date(val.x * 1000).toLocaleDateString())\r\n      let newData = {\r\n        labels: xVals,\r\n        datasets: [\r\n          {\r\n            label: `BTC Market Price - ${timePeriod} Months`,\r\n            data: updatedMarketPrice.values.filter((val) => val.y),\r\n            fill: true,\r\n            backgroundColor: \"rgba(75,192,192,0.2)\",\r\n            borderColor: \"rgba(75,192,192,1)\",\r\n          },\r\n        ],\r\n      }\r\n      setMarketPrice(newData)\r\n    } catch (err) {\r\n      console.log(\"err:\", err)\r\n    }\r\n  }\r\n\r\n  const onSetTimePeriod = (ev) => {\r\n    const value = ev.target.value\r\n    setTimePeriod(value)\r\n  }\r\n\r\n  if (!updatedMarketPrice) return <span>Loading</span>\r\n  return (\r\n    <div className='MarketPrice'>\r\n      <select name='timePeriod' onChange={(ev) => onSetTimePeriod(ev)} id='timePeriod'>\r\n        <option value='10'>10 Months</option>\r\n        <option value='2'>2 Months</option>\r\n        <option value='4'>4 Months</option>\r\n        <option value='6'>6 Months</option>\r\n        <option value='8'>8 Months</option>\r\n        <option value='12'>12 Months</option>\r\n      </select>\r\n      <Line data={updatedMarketPrice} />\r\n    </div>\r\n  )\r\n}\r\n\r\n"],"mappings":"yiBAAA,OAASA,IAAT,KAAqB,iBAArB,CACA,OAASC,SAAT,CAAoBC,QAApB,CAA8BC,KAA9B,KAA2C,OAA3C,CACA,MAAOC,MAAP,KAAkB,eAAlB,CAAkC;AAElC;AACA,OAASC,cAAT,KAA+B,6BAA/B,C,wFAEA,MAAO,IAAMC,YAAW,CAAG,QAAdA,YAAc,EAAM,CAC/B,cAA6CJ,QAAQ,CAAC,IAAD,CAArD,wCAAOK,kBAAP,eAA2BC,cAA3B,eACA,eAAoCN,QAAQ,CAAC,IAAD,CAA5C,yCAAOO,UAAP,eAAmBC,aAAnB,eAEAT,SAAS,CAAC,UAAM,CACdU,eAAe,GAChB,CAFQ,CAEN,CAACF,UAAD,CAFM,CAAT,CAIA,GAAME,gBAAe,4FAAG,iNAEWN,eAAc,CAACO,cAAf,CAA8BH,UAA9B,CAFX,QAEhBF,mBAFgB,eAKpBM,KAAK,CAAGN,mBAAkB,CAACO,MAAnB,CAA0BC,GAA1B,CAA8B,SAACC,GAAD,QAAS,IAAIC,KAAJ,CAASD,GAAG,CAACE,CAAJ,CAAQ,IAAjB,EAAuBC,kBAAvB,EAAT,EAA9B,CAAR,CACIC,OANgB,CAMN,CACZC,MAAM,CAAER,KADI,CAEZS,QAAQ,CAAE,CACR,CACEC,KAAK,8BAAwBd,UAAxB,WADP,CAEEe,IAAI,CAAEjB,mBAAkB,CAACO,MAAnB,CAA0BW,MAA1B,CAAiC,SAACT,GAAD,QAASA,IAAG,CAACU,CAAb,EAAjC,CAFR,CAGEC,IAAI,CAAE,IAHR,CAIEC,eAAe,CAAE,sBAJnB,CAKEC,WAAW,CAAE,oBALf,CADQ,CAFE,CANM,CAkBpBrB,cAAc,CAACY,OAAD,CAAd,CAlBoB,+EAoBpBU,OAAO,CAACC,GAAR,CAAY,MAAZ,cApBoB,oEAAH,kBAAfpB,gBAAe,0CAArB,CAwBA,GAAMqB,gBAAe,CAAG,QAAlBA,gBAAkB,CAACC,EAAD,CAAQ,CAC9B,GAAMC,MAAK,CAAGD,EAAE,CAACE,MAAH,CAAUD,KAAxB,CACAxB,aAAa,CAACwB,KAAD,CAAb,CACD,CAHD,CAKA,GAAI,CAAC3B,kBAAL,CAAyB,mBAAO,iCAAP,CACzB,mBACE,aAAK,SAAS,CAAC,aAAf,wBACE,gBAAQ,IAAI,CAAC,YAAb,CAA0B,QAAQ,CAAE,kBAAC0B,EAAD,QAAQD,gBAAe,CAACC,EAAD,CAAvB,EAApC,CAAiE,EAAE,CAAC,YAApE,wBACE,eAAQ,KAAK,CAAC,IAAd,uBADF,cAEE,eAAQ,KAAK,CAAC,GAAd,sBAFF,cAGE,eAAQ,KAAK,CAAC,GAAd,sBAHF,cAIE,eAAQ,KAAK,CAAC,GAAd,sBAJF,cAKE,eAAQ,KAAK,CAAC,GAAd,sBALF,cAME,eAAQ,KAAK,CAAC,IAAd,uBANF,GADF,cASE,KAAC,IAAD,EAAM,IAAI,CAAE1B,kBAAZ,EATF,GADF,CAaD,CAnDM"},"metadata":{},"sourceType":"module"}