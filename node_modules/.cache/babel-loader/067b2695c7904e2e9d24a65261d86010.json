{"ast":null,"code":"import{storageService}from\"../services/storageService\";export var userService={getUser:getUser,signUp:signUp,updateBalance:updateBalance};var USERS=\"usersDB\";var USER_KEY=\"loggedin\";// const gUsers = storageService.load(USERS) || {}\nfunction getUser(){// return {\n//     name:\"Banjemin Brice\",\n//     coins: 100,\n//     moves:[],\n// }\n//   const user = JSON.parse(sessionStorage.getItem(STORAGE_KEY))\nvar user=storageService.load(USER_KEY)||null;return user;}function signUp(name){var user={name:name,coins:100,moves:[]};console.log(name);storageService.store(USER_KEY,user);}function updateBalance(to,val){var user=getUser();console.log(val);var userBalance=JSON.parse(JSON.stringify(user.coins));if(userBalance-val<=0)return false;user.coins=user.coins-val;var move={'At':new Date(Date.now()).toLocaleDateString(),'Amount':val,to:to};user.moves.unshift(move);storageService.store(USER_KEY,user);return user.moves;}","map":{"version":3,"names":["storageService","userService","getUser","signUp","updateBalance","USERS","USER_KEY","user","load","name","coins","moves","console","log","store","to","val","userBalance","JSON","parse","stringify","move","Date","now","toLocaleDateString","unshift"],"sources":["C:/Users/ALON/Desktop/Mister-bitcoin -React day 106/Mister Bitcoin-React-with-hooks-and-redux/src/services/user.service.js"],"sourcesContent":["import { storageService } from \"../services/storageService\"\r\nexport const userService = {\r\n  getUser,\r\n  signUp,\r\n  updateBalance,\r\n}\r\n\r\nconst USERS = \"usersDB\"\r\nconst USER_KEY = \"loggedin\"\r\n// const gUsers = storageService.load(USERS) || {}\r\n\r\nfunction getUser() {\r\n  // return {\r\n  //     name:\"Banjemin Brice\",\r\n  //     coins: 100,\r\n  //     moves:[],\r\n  // }\r\n  //   const user = JSON.parse(sessionStorage.getItem(STORAGE_KEY))\r\n  const user = storageService.load(USER_KEY) || null\r\n  return user\r\n}\r\n\r\nfunction signUp(name) {\r\n  let user = {\r\n    name,\r\n    coins: 100,\r\n    moves: [],\r\n  }\r\n  console.log(name)\r\n  storageService.store(USER_KEY, user)\r\n}\r\n\r\nfunction updateBalance(to,val) {\r\n  let user = getUser()\r\n  console.log(val)\r\n  let userBalance = JSON.parse(JSON.stringify(user.coins))\r\n  if (userBalance - val <= 0) return false\r\n\r\n  user.coins = user.coins - val\r\n\r\n  let move = {\r\n    'At': new Date(Date.now()).toLocaleDateString(),\r\n    'Amount': val ,\r\n   to,\r\n  }\r\n  user.moves.unshift(move)\r\n  storageService.store(USER_KEY, user)\r\n  return user.moves\r\n}\r\n"],"mappings":"AAAA,OAASA,cAAT,KAA+B,4BAA/B,CACA,MAAO,IAAMC,YAAW,CAAG,CACzBC,OAAO,CAAPA,OADyB,CAEzBC,MAAM,CAANA,MAFyB,CAGzBC,aAAa,CAAbA,aAHyB,CAApB,CAMP,GAAMC,MAAK,CAAG,SAAd,CACA,GAAMC,SAAQ,CAAG,UAAjB,CACA;AAEA,QAASJ,QAAT,EAAmB,CACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAMK,KAAI,CAAGP,cAAc,CAACQ,IAAf,CAAoBF,QAApB,GAAiC,IAA9C,CACA,MAAOC,KAAP,CACD,CAED,QAASJ,OAAT,CAAgBM,IAAhB,CAAsB,CACpB,GAAIF,KAAI,CAAG,CACTE,IAAI,CAAJA,IADS,CAETC,KAAK,CAAE,GAFE,CAGTC,KAAK,CAAE,EAHE,CAAX,CAKAC,OAAO,CAACC,GAAR,CAAYJ,IAAZ,EACAT,cAAc,CAACc,KAAf,CAAqBR,QAArB,CAA+BC,IAA/B,EACD,CAED,QAASH,cAAT,CAAuBW,EAAvB,CAA0BC,GAA1B,CAA+B,CAC7B,GAAIT,KAAI,CAAGL,OAAO,EAAlB,CACAU,OAAO,CAACC,GAAR,CAAYG,GAAZ,EACA,GAAIC,YAAW,CAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAeb,IAAI,CAACG,KAApB,CAAX,CAAlB,CACA,GAAIO,WAAW,CAAGD,GAAd,EAAqB,CAAzB,CAA4B,MAAO,MAAP,CAE5BT,IAAI,CAACG,KAAL,CAAaH,IAAI,CAACG,KAAL,CAAaM,GAA1B,CAEA,GAAIK,KAAI,CAAG,CACT,KAAM,GAAIC,KAAJ,CAASA,IAAI,CAACC,GAAL,EAAT,EAAqBC,kBAArB,EADG,CAET,SAAUR,GAFD,CAGVD,EAAE,CAAFA,EAHU,CAAX,CAKAR,IAAI,CAACI,KAAL,CAAWc,OAAX,CAAmBJ,IAAnB,EACArB,cAAc,CAACc,KAAf,CAAqBR,QAArB,CAA+BC,IAA/B,EACA,MAAOA,KAAI,CAACI,KAAZ,CACD"},"metadata":{},"sourceType":"module"}