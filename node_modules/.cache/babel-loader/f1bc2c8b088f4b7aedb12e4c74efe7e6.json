{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/ALON/Desktop/Mister-bitcoin -React day 106/Mister Bitcoin-React-with-hooks-and-redux/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/ALON/Desktop/Mister-bitcoin -React day 106/Mister Bitcoin-React-with-hooks-and-redux/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{bitcoinService}from\"../../services/bitcoin.service\";import{userService}from\"../../services/user.service\";export function loadUser(){return function(dispatch,getState){try{var user=userService.getUser();dispatch({type:'SET_USER',user:user});}catch(err){console.log('Cannot load user',err);throw err;}};}export function getUserMoves(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch,getState){var userMoves;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return userService.getUser().moves;case 3:userMoves=_context.sent;dispatch({type:'SET_USER_MOVES',userMoves:userMoves});_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log('Cannot get user moves',_context.t0);throw _context.t0;case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();}export function getUserRate(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch,getState){var user,userRate;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;user=getState().userModule.user;_context2.next=4;return bitcoinService.getRate(user.coins);case 4:userRate=_context2.sent;dispatch({type:'SET_USER_RATE',userRate:userRate});_context2.next=12;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log('Cannot get user rate',_context2.t0);throw _context2.t0;case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();}export function addUserMove(contact,coins){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch,getState){var userMove;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;console.log(contact,coins);_context3.next=4;return userService.updateBalance(contact,+coins);case 4:userMove=_context3.sent;console.log(userMove);dispatch({type:'SET_USER',userMove:userMove});_context3.next=13;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);console.log('Cannot add user move',_context3.t0);throw _context3.t0;case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);}));return function(_x5,_x6){return _ref3.apply(this,arguments);};}();}export function signup(contactName){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch,getState){var user;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;user=userService.signUp(contactName);dispatch({type:'SET_USER',user:user});_context4.next=9;break;case 5:_context4.prev=5;_context4.t0=_context4[\"catch\"](0);console.log('Cannot sign up',_context4.t0);throw _context4.t0;case 9:case\"end\":return _context4.stop();}}},_callee4,null,[[0,5]]);}));return function(_x7,_x8){return _ref4.apply(this,arguments);};}();}","map":{"version":3,"names":["bitcoinService","userService","loadUser","dispatch","getState","user","getUser","type","err","console","log","getUserMoves","moves","userMoves","getUserRate","userModule","getRate","coins","userRate","addUserMove","contact","updateBalance","userMove","signup","contactName","signUp"],"sources":["C:/Users/ALON/Desktop/Mister-bitcoin -React day 106/Mister Bitcoin-React-with-hooks-and-redux/src/store/actions/userActions.js"],"sourcesContent":["import { bitcoinService } from \"../../services/bitcoin.service\";\nimport { userService } from \"../../services/user.service\";\n\nexport function loadUser() {\n    return (dispatch, getState) => {\n        try {\n            const user = userService.getUser()\n            dispatch({ type: 'SET_USER', user })\n        } catch (err) {\n            console.log('Cannot load user', err)\n            throw err\n        }\n    }\n}\n\nexport function getUserMoves() {\n    return async (dispatch, getState) => {\n        try {\n            const userMoves = await userService.getUser().moves\n            dispatch({ type: 'SET_USER_MOVES', userMoves })\n        } catch (err) {\n            console.log('Cannot get user moves', err);\n            throw err\n        }\n    }\n}\n\n\nexport function getUserRate() {\n    return async (dispatch, getState) => {\n        try {\n            const { user } = getState().userModule\n            const userRate = await bitcoinService.getRate(user.coins)\n            dispatch({ type: 'SET_USER_RATE', userRate })\n        } catch (err) {\n            console.log('Cannot get user rate', err)\n            throw err\n        }\n    }\n}\n\nexport function addUserMove(contact, coins) {\n    return async (dispatch, getState) => {\n        try {\n            console.log(contact,coins);\n            const userMove = await userService.updateBalance(contact, +coins)\n            console.log(userMove)\n            dispatch({ type: 'SET_USER', userMove })\n        } catch (err) {\n            console.log('Cannot add user move', err)\n            throw err\n        }\n    }\n}\n\nexport function signup(contactName) {\n    return async (dispatch, getState) => {\n        try {\n            const user =     userService.signUp(contactName)\n\n            dispatch({ type: 'SET_USER', user })\n        } catch (err) {\n            console.log('Cannot sign up', err)\n            throw err\n        }\n    }\n}\n\n\n"],"mappings":"sXAAA,OAASA,cAAT,KAA+B,gCAA/B,CACA,OAASC,WAAT,KAA4B,6BAA5B,CAEA,MAAO,SAASC,SAAT,EAAoB,CACvB,MAAO,UAACC,QAAD,CAAWC,QAAX,CAAwB,CAC3B,GAAI,CACA,GAAMC,KAAI,CAAGJ,WAAW,CAACK,OAAZ,EAAb,CACAH,QAAQ,CAAC,CAAEI,IAAI,CAAE,UAAR,CAAoBF,IAAI,CAAJA,IAApB,CAAD,CAAR,CACH,CAAC,MAAOG,GAAP,CAAY,CACVC,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAAgCF,GAAhC,EACA,KAAMA,IAAN,CACH,CACJ,CARD,CASH,CAED,MAAO,SAASG,aAAT,EAAwB,CAC3B,iGAAO,iBAAOR,QAAP,CAAiBC,QAAjB,wKAEyBH,YAAW,CAACK,OAAZ,GAAsBM,KAF/C,QAEOC,SAFP,eAGCV,QAAQ,CAAC,CAAEI,IAAI,CAAE,gBAAR,CAA0BM,SAAS,CAATA,SAA1B,CAAD,CAAR,CAHD,+EAKCJ,OAAO,CAACC,GAAR,CAAY,uBAAZ,cALD,sFAAP,mEASH,CAGD,MAAO,SAASI,YAAT,EAAuB,CAC1B,kGAAO,kBAAOX,QAAP,CAAiBC,QAAjB,2JAESC,IAFT,CAEkBD,QAAQ,GAAGW,UAF7B,CAESV,IAFT,wBAGwBL,eAAc,CAACgB,OAAf,CAAuBX,IAAI,CAACY,KAA5B,CAHxB,QAGOC,QAHP,gBAICf,QAAQ,CAAC,CAAEI,IAAI,CAAE,eAAR,CAAyBW,QAAQ,CAARA,QAAzB,CAAD,CAAR,CAJD,mFAMCT,OAAO,CAACC,GAAR,CAAY,sBAAZ,eAND,yFAAP,qEAUH,CAED,MAAO,SAASS,YAAT,CAAqBC,OAArB,CAA8BH,KAA9B,CAAqC,CACxC,kGAAO,kBAAOd,QAAP,CAAiBC,QAAjB,sJAECK,OAAO,CAACC,GAAR,CAAYU,OAAZ,CAAoBH,KAApB,EAFD,uBAGwBhB,YAAW,CAACoB,aAAZ,CAA0BD,OAA1B,CAAmC,CAACH,KAApC,CAHxB,QAGOK,QAHP,gBAICb,OAAO,CAACC,GAAR,CAAYY,QAAZ,EACAnB,QAAQ,CAAC,CAAEI,IAAI,CAAE,UAAR,CAAoBe,QAAQ,CAARA,QAApB,CAAD,CAAR,CALD,mFAOCb,OAAO,CAACC,GAAR,CAAY,sBAAZ,eAPD,yFAAP,qEAWH,CAED,MAAO,SAASa,OAAT,CAAgBC,WAAhB,CAA6B,CAChC,kGAAO,kBAAOrB,QAAP,CAAiBC,QAAjB,kJAEOC,IAFP,CAEkBJ,WAAW,CAACwB,MAAZ,CAAmBD,WAAnB,CAFlB,CAICrB,QAAQ,CAAC,CAAEI,IAAI,CAAE,UAAR,CAAoBF,IAAI,CAAJA,IAApB,CAAD,CAAR,CAJD,kFAMCI,OAAO,CAACC,GAAR,CAAY,gBAAZ,eAND,wFAAP,qEAUH"},"metadata":{},"sourceType":"module"}